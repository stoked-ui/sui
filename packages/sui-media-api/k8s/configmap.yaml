apiVersion: v1
kind: ConfigMap
metadata:
  name: media-api-config
  namespace: stoked
  labels:
    app: media-api
    component: config
spec:
  data:
    # Server Configuration
    NODE_ENV: "production"
    PORT: "3001"
    API_PATH_PREFIX: "/v1"

    # Logging Configuration
    LOG_LEVEL: "log"
    LOG_REQUESTS: "true"
    LOG_DATABASE_QUERIES: "false"
    STRUCTURED_LOGS: "true"

    # Cache Configuration
    ENABLE_CACHE: "true"
    CACHE_TTL: "3600"

    # AWS Region
    AWS_REGION: "us-east-1"

    # S3 Configuration
    AWS_S3_BUCKET: "stoked-media-uploads"
    AWS_S3_FORCE_PATH_STYLE: "false"

    # Media Processing
    FFMPEG_PATH: "/usr/bin/ffmpeg"
    FFPROBE_PATH: "/usr/bin/ffprobe"
    MEDIA_PROCESSING_TIMEOUT: "300000"
    MAX_FILE_SIZE: "1073741824"
    THUMBNAIL_QUALITY: "80"
    THUMBNAIL_SIZES: "320,640,1280"

    # Database Configuration
    MONGODB_RETRY_ATTEMPTS: "3"
    MONGODB_RETRY_DELAY: "1000"

    # Request Configuration
    REQUEST_TIMEOUT: "30000"
    KEEPALIVE_TIMEOUT: "65000"
    MAX_CONCURRENT_UPLOADS: "10"

    # CORS Configuration
    CORS_METHODS: "GET,POST,PUT,DELETE,PATCH"
    CORS_CREDENTIALS: "true"
